##计算机网络
<!-- GFM-TOC -->
* [UDP和TCP的区别](#udp-和-tcp-的区别)
* [TCP的三次握手、四次挥手](#-tcp-的三次握手、四次挥手)
* [UDP 首部格式](#udp-首部格式)
* [TCP 首部格式](#tcp-首部格式)
* [TCP 的三次握手](#tcp-的三次握手)
* [TCP 的四次挥手](#tcp-的四次挥手)
* [TCP 可靠传输](#tcp-可靠传输)
* [TCP 滑动窗口](#tcp-滑动窗口)
* [TCP 流量控制](#tcp-流量控制)
* [TCP 拥塞控制](#tcp-拥塞控制)
* [1. 慢开始与拥塞避免](#1-慢开始与拥塞避免)
* [2. 快重传与快恢复](#2-快重传与快恢复)
<!-- GFM-TOC -->
#### 1 UDP和TCP的区别
- TCP是面向连接的，提供可靠交付的；UDP是无连接的，提供最大能力交付的
- TCP的数据传输以字节流的形式，UDP的数据传输是以数据报文段的形式
- TCP具有三次握手以及四次挥手；UDP没有
- TCP所需资源多，传输效率低；UDP所需资源少，传输效率高
- TCP只可点对点，一对一；UDP支持一对一，一对多，多对一，多对多
- TCP适用于对可靠性要求较高的场景，比如文件的传输等；UDP适用于实时性要求较高的场景，比如微信视频通话等。
> 扩展：TCP用检验和、ARQ协议、流量控制（滑动窗口）、拥塞控制、超时重传等机制保证TCP连接是可靠的；UDP则不保证可靠交付，只保证尽力交付。
#### 2 TCP的三次握手、四次挥手
#### 1 三次握手
![](./res/e92d0ebc-7d46-413b-aec1-34a39602f787.png)
- 客户端–发送带有SYN标志的数据包–一次握手–服务端
- 服务端–发送带有SYN / ACK标志的数据包–二次握手–客户端
- 客户端–发送带有带有ACK标志的数据包–三次握手–服务端
##### 1.1 为什么要三次握手
**三次握手的目的是建立可靠的通信信道，说到通讯，简单来说就是数据的发送与接收，而三次握手最主要的目的就是双方确认自己与对方的发送与接收是正常的。**

第一次握手：客户什么都不能确认；服务器确认了对方发送正常，自己接收正常

第二次握手：客户端确认了：自己发送，接收正常，对方发送，接收正常；服务器确认了：对方发送正常，自己接收正常

第三次握手：客户端确认了：自己发送，接收正常，对方发送，接收正常；服务器确认了：自己发送，接收正常，对方发送，接收正常
所以三次握手就能确认双发收发功能都正常，缺一不可。
#### 2 四次挥手
![](./res/f87afe72-c2df-4c12-ac03-9b8d581a8af8.jpg)
- 客户端-发送一个FIN，用于关闭客户端到服务器的数据传送
- 服务器-收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。和SYN一样，一个FIN将占用一个序号
- 服务器-关闭与客户端的连接，发送一个FIN给客户端
- 客户端-发回ACK报文确认，重新确认序号设置为收到序号加1
> 任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了TCP连接。
##### 2.1 为什么要四次挥手
**四次挥手的原因**  

客户端发送了 FIN 连接释放报文之后，服务器收到了这个报文，就进入了 CLOSE-WAIT 状态。这个状态是为了让服务器端发送还未传送完毕的数据，传送完毕之后，服务器会发送 FIN 连接释放报文。

**TIME_WAIT**  

客户端接收到服务器端的 FIN 报文后进入此状态，此时并不是直接进入 CLOSED 状态，还需要等待一个时间计时器设置的时间 2MSL(报文在网络中最长生存时间)。这么做有两个理由：

- 确保客户端发送的最后一个ACK确认报文能够到达服务器端。如果 B 没收到 A 发送来的确认报文，那么就会重新发送连接释放请求报文，A 等待一段时间就是为了处理这种情况的发生。
- 防止已经失效的连接请求报文段出现在本次连接中。
> 为什么是2MSL：确认服务器端是否正常收到了客户端最后发出的确认报文，如果服务器端没有收到的话，过1MSL（报文在网络中的最大存活时间）会重新再发送一次FIN报文给客户端，如果过了2MSL还没有收到新发的FIN报文的话，证明服务器端已经收到确认报文并正常关闭连接，客户端也可以关闭连接。
#### 3 输入URL到显示网页发生了什么
- DNS解析
- TCP连接
- 浏览器向服务器发送HTTP请求
- 服务器处理请求并返回HTTP报文
- 浏览器解析渲染页面
- 连接结束
#### 4 HTTP和HTTPS的区别
HTTP协议是超文本传输协议，采用客户端/服务器的方式，它的特点是：①无连接，建立在TCP连接的基础之上；②无状态，cookie和session可以辅助记录客户端/服务器的状态

1.HTTP协议运行在TCP之上，不提供身份认证和数据加密，所有数据都是以明文的形式传输的；HTTPS以SSL为安全基础，提供了数据加密和服务器端的身份认证（以对称加密的方式为传输的数据进行加密，用数字证书的方式提供服务器端的身份认证），更为安全

2.HTTPS比HTTP需要耗费更多的资源，响应速度也更慢

3.HTTPS需要CA颁布申请证书，通常不是免费的

4.HTTP端口号是80，HTTPS的端口号是443
>1 对称加密：密钥只有一个，加密解密为同一个密码，并且加解密速度快，典型的对称加密算法有DES，AES等；
>2 非对称加密：密钥成对出现（并且根据公钥无法推知私钥，根据私钥也无法推知公钥），加密解密使用不同密钥（公钥加密需要私钥解密，私钥加密需要公钥解密），相对对称加密速度较慢，典型的非对称加密算法有RSA，DSA等。
#### 5 常见状态码
- 1xx 表示正在处理

100 continue 表明到目前为止都很正常，客户端可以继续发送请求或者忽略这个响应
- 2xx 成功 表示请求已经正常处理

200 OK 一切正常返回数据

204 No content 请求正常处理，但是没有数据返回

206 指定范围返回（http1.1以上支持的断点续传功能相关）
- 3xx 重定向 浏览器需要一些额外的操作才能完成请求

301 永久性重定向

302 暂时性重定向（跟http劫持有关，运营商可以通过DNS劫持和http劫持两种，返回一个302，然后让用户跳转到处理好的携带广告的页面）

303 暂时性重定向 但是服务器端明确说明希望浏览器用get方法来请求资源

304 浏览器附带了请求的条件，服务器端允许访问，但是不满足请求条件
- 4xx 客户端错误

400 客户端的请求有语法错误

403 forbidden 没有权限

404 Not found 客户端申请访问的资源不存在

405 Method not allowed 客户端请求方法被禁止
- 5xx 服务器端错误

500 服务器在请求处理时内部出错

501 服务器不具备完成请求的功能，如无法识别请求方法

502 服务器作为网关或代理，从上游服务器获得无效响应

503 Bad Gateway 服务器处于停机维护/超负荷状态

504 Gateway timeout服务器作为网关或代理，没有及时从上游服务器获得响应